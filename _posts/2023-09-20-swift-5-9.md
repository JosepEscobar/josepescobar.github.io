---
title: "Swift 5.9 춰Ya est치 Disponible! 游꿀"
author: Josep Escobar
date: 2023-09-20 13:41:00 +0800
categories: [Desarrollo de Software, Programaci칩n, Lenguajes de Programaci칩n]
tags: [Swift, Programaci칩n, Desarrollo de Software, Novedades]
pin: true
math: true
mermaid: true
---

Esta importante nueva versi칩n agrega un sistema de macros expresivo al lenguaje e introduce soporte para integrar Swift en bases de c칩digo de C++ a trav칠s de interoperabilidad bidireccional.

Tambi칠n introduce paquetes de par치metros, un mejor evaluador de expresiones durante la depuraci칩n, mejoras en el manejo de crashes, mejoras en la plataforma Windows y m치s.

**Lenguaje y Biblioteca Est치ndar**

El objetivo fundamental de Swift es fomentar un c칩digo claro y conciso mientras se mantiene seguro y eficiente.

**Macros**

Las macros ayudan a los desarrolladores a reducir la repetici칩n de c칩digo boilerplate y crear bibliotecas m치s expresivas que se pueden distribuir como un paquete Swift.

Usar una macro es f치cil y natural. Las macros se pueden expandir de manera similar a una funci칩n con una sintaxis de #nombreMacro independiente:

```swift
let _: Font = #fontLiteral(name: "SF Mono", size: 14, weight: .regular)
```

o adjuntarse a declaraciones con un atributo @nombreMacro:

```swift
// Mueve el almacenamiento de las propiedades almacenadas a un diccionario,
// convirtiendo las propiedades almacenadas en propiedades calculadas.
@DictionaryStorage
struct Point {
  var x: Int = 1
  var y: Int = 2
}
```

**Paquetes de Par치metros**

Los paquetes de par치metros te permiten escribir tipos y funciones gen칠ricas que funcionan con un n칰mero arbitrario de tipos.

Por ejemplo, sin paquetes de par치metros, si quisieras escribir una funci칩n llamada "all" para verificar si cualquier cantidad de valores opcionales son nulos, necesitar칤as escribir una sobrecarga separada para cada longitud de argumento que quisieras admitir, creando un l칤mite arbitrario:

```swift
func all<W1>(_ optional: W1?) -> W1?
func all<W1, W2>(_ optional1: W1?, optional2: W2?) -> (W1, W2)?
func all<W1, W2, W3>(_ optional1: W1?, optional2: W2?, optional3: W3?) -> (W1, W2, W2)?
```

Con paquetes de par치metros, puedes expresar esta API como una 칰nica funci칩n que no tiene l칤mite superior, lo que te permite pasar cualquier n칰mero de argumentos:

```swift
func all<cada Envuelto>(_ optional: repetir (cada Envuelto)?) -> (repetir cada Envuelto)?
```

Llamar a una API que utiliza paquetes de par치metros es intuitivo y no requiere trabajo adicional:

```swift
let (int, double, string, bool) = all(optionalInt, optionalDouble, optionalString, optionalBool) {
  print(int, double, string, bool)
}
else {
  print("recibido un nulo")
}
```

**Caracter칤sticas Adicionales**

Swift 5.9 tambi칠n incluye cambios m치s peque침os que mejoran la calidad de vida en el lenguaje, como la capacidad de usar "if" y "switch" como expresiones para asignaci칩n de variables y valores de retorno:

```swift
statusBar.text = si !tieneConexi칩n { "Desconectado" }
                 else if let error = 칰ltimoError { error.localizedDescription }
                 else { "Listo" }
```

**Experiencia del Desarrollador**

Manejo de Crashes

El tiempo de ejecuci칩n de Swift ahora atrapar치 los crashes del programa y los errores de tiempo de ejecuci칩n de Swift, mostrando una traza en la salida del programa. El rastreador est치 fuera del proceso e incluye soporte para funciones as칤ncronas.

Esta caracter칤stica tambi칠n est치 disponible en macOS, pero est치 desactivada por defecto. Para habilitarla, establece SWIFT_BACKTRACE=enable=yes y firma tu programa con la concesi칩n com.apple.security.get-task-allow.

**Ecosistema**

Interoperabilidad con C++

Swift 5.9 admite interoperabilidad bidireccional con C++ y Objective-C++ para ciertos tipos de API.

Por ejemplo, si tienes una funci칩n C++ como esta:

```cpp
// M칩dulo Clang 'PromptResponder'
#pragma once
#include <vector>
std::vector<std::string> generatePromptResponse(std::string prompt);
```

Puedes llamarla directamente desde tu c칩digo Swift:

```swift
import PromptResponder
let l칤neasDeC칩digo = generatePromptResponse("Escribe c칩digo Swift que imprima hola mundo")
  .map(String.init)
  .filter { !$0.isEmpty }
para l칤nea in l칤neasDeC칩digo {
  imprimir(l칤nea)
}
```

La interoperabilidad con C++ est치 evolucionando activamente, y algunos aspectos pueden cambiar en futuras versiones a medida que la comunidad recopila comentarios de la adopci칩n del mundo real en bases de c칩digo mixtas de Swift y C++.
